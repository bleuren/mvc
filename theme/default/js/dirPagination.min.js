(function(){var q;try{q=angular.module("angularUtils.directives.dirPagination")}catch(b){q=angular.module("angularUtils.directives.dirPagination",[])}q.directive("dirPaginate",["$compile","$parse","paginationService",function(b,f,c){function d(a,b){var c=!!a.match(/(\|\s*itemsPerPage\s*:[^|]*:[^|]*)/);return"__default"===b||c?a:a.replace(/(\|\s*itemsPerPage\s*:[^|]*)/,"$1 : '"+b+"'")}function a(a,b,c){a[0].hasAttribute("dir-paginate-start")||a[0].hasAttribute("data-dir-paginate-start")?(b.$set("ngRepeatStart",
c),a.eq(a.length-1).attr("ng-repeat-end",!0)):b.$set("ngRepeat",c)}function m(a){angular.forEach(a,function(a){a.nodeType===Node.ELEMENT_NODE&&angular.element(a).attr("dir-paginate-no-compile",!0)})}function n(a){angular.forEach(a,function(a){a.nodeType===Node.ELEMENT_NODE&&angular.element(a).removeAttr("dir-paginate-no-compile")});a.eq(0).removeAttr("dir-paginate-start").removeAttr("dir-paginate").removeAttr("data-dir-paginate-start").removeAttr("data-dir-paginate");a.eq(a.length-1).removeAttr("dir-paginate-end").removeAttr("data-dir-paginate-end")}
function p(a,b,c){b.currentPage?a=f(b.currentPage):(b=c+"__currentPage",a[b]=1,a=f(b));return a}return{terminal:!0,multiElement:!0,compile:function(k,l){var e=l.dirPaginate,g=e.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),h=/\|\s*itemsPerPage\s*:[^|]*/;if(null===g[2].match(h))throw"pagination directive: the 'itemsPerPage' filter must be set.";var g=g[2].replace(h,""),r=f(g);m(k);c.registerInstance(l.paginationId||"__default");return function(h,m,g){var k=f(g.paginationId)(h)||
g.paginationId||"__default";c.registerInstance(k);var l=d(e,k);a(m,g,l);n(m);m=b(m);l=p(h,g,k);c.setCurrentPageParser(k,l,h);"undefined"!==typeof g.totalItems?(c.setAsyncModeTrue(k),h.$watch(function(){return f(g.totalItems)(h)},function(a){0<=a&&c.setCollectionLength(k,a)})):h.$watchCollection(function(){return r(h)},function(a){a&&c.setCollectionLength(k,a.length)});m(h)}}}}]).directive("dirPaginateNoCompile",function(){return{priority:5E3,terminal:!0}}).directive("dirPaginationControls",["paginationService",
"paginationTemplate",function(b,f){function c(a,b,c,d){var f=[];b=Math.ceil(b/c);c=Math.ceil(d/2);c=a<=c?"start":b-c<a?"end":"middle";for(var l=d<b,e=1;e<=b&&e<=d;){var g;g=Math.ceil(d/2);g=e===d?b:1===e?e:d<b?b-g<a?b-d+e:g<a?a-g+e:e:e;var h=2===e&&("middle"===c||"end"===c),r=e===d-1&&("middle"===c||"start"===c);l&&(h||r)?f.push("..."):f.push(g);e++}return f}var d=/^\d+$/;return{restrict:"AE",templateUrl:function(a,b){return b.templateUrl||f.getPath()},scope:{maxSize:"=?",onPageChange:"&?",paginationId:"=?"},
link:function(a,f,n){function p(h){if(l(h)&&(a.pages=c(h,b.getCollectionLength(e),b.getItemsPerPage(e),g),a.pagination.current=h,k(),a.onPageChange))a.onPageChange({newPageNumber:h})}function k(){var c=b.getCurrentPage(e),d=b.getItemsPerPage(e),f=b.getCollectionLength(e);a.range.lower=(c-1)*d+1;a.range.upper=Math.min(c*d,f);a.range.total=f}function l(b){return d.test(b)&&0<b&&b<=a.pagination.last}f=n.paginationId||"__default";var e=a.paginationId||n.paginationId||"__default";if(!b.isRegistered(e)&&
!b.isRegistered(f))throw"pagination directive: the pagination controls"+("__default"!==e?" (id: "+e+") ":" ")+"cannot be used without the corresponding pagination directive.";a.maxSize||(a.maxSize=9);a.directionLinks=angular.isDefined(n.directionLinks)?a.$parent.$eval(n.directionLinks):!0;a.boundaryLinks=angular.isDefined(n.boundaryLinks)?a.$parent.$eval(n.boundaryLinks):!1;var g=Math.max(a.maxSize,5);a.pages=[];a.pagination={last:1,current:1};a.range={lower:1,upper:1,total:1};a.$watch(function(){return(b.getCollectionLength(e)+
1)*b.getItemsPerPage(e)},function(d){0<d&&(d=parseInt(b.getCurrentPage(e))||1,a.pages=c(d,b.getCollectionLength(e),b.getItemsPerPage(e),g),a.pagination.current=d,a.pagination.last=a.pages[a.pages.length-1],a.pagination.last<a.pagination.current?a.setCurrent(a.pagination.last):k())});a.$watch(function(){return b.getItemsPerPage(e)},function(b,c){b!=c&&"undefined"!==typeof c&&p(a.pagination.current)});a.$watch(function(){return b.getCurrentPage(e)},function(a,b){a!=b&&p(a)});a.setCurrent=function(a){l(a)&&
(a=parseInt(a,10),b.setCurrentPage(e,a))}}}}]).filter("itemsPerPage",["paginationService",function(b){return function(f,c,d){"undefined"===typeof d&&(d="__default");if(!b.isRegistered(d))throw"pagination directive: the itemsPerPage id argument (id: "+d+") does not match a registered pagination-id.";var a,m;return f instanceof Array?(c=parseInt(c)||9999999999,m=b.isAsyncMode(d)?0:(b.getCurrentPage(d)-1)*c,a=m+c,b.setItemsPerPage(d,c),f.slice(m,a)):f}}]).service("paginationService",function(){var b=
{},f;this.registerInstance=function(c){"undefined"===typeof b[c]&&(b[c]={asyncMode:!1},f=c)};this.isRegistered=function(c){return"undefined"!==typeof b[c]};this.getLastInstanceId=function(){return f};this.setCurrentPageParser=function(c,d,a){b[c].currentPageParser=d;b[c].context=a};this.setCurrentPage=function(c,d){b[c].currentPageParser.assign(b[c].context,d)};this.getCurrentPage=function(c){var d=b[c].currentPageParser;return d?d(b[c].context):1};this.setItemsPerPage=function(c,d){b[c].itemsPerPage=
d};this.getItemsPerPage=function(c){return b[c].itemsPerPage};this.setCollectionLength=function(c,d){b[c].collectionLength=d};this.getCollectionLength=function(c){return b[c].collectionLength};this.setAsyncModeTrue=function(c){b[c].asyncMode=!0};this.isAsyncMode=function(c){return b[c].asyncMode}}).provider("paginationTemplate",function(){var b="angularUtils.directives.dirPagination.template";this.setPath=function(f){b=f};this.$get=function(){return{getPath:function(){return b}}}}).run(["$templateCache",
function(b){b.put("angularUtils.directives.dirPagination.template",'<ul class="pagination" ng-if="1 < pages.length"><li ng-if="boundaryLinks" ng-class="{ disabled : pagination.current == 1 }"><a href="" ng-click="setCurrent(1)">&laquo;</a></li><li ng-if="directionLinks" ng-class="{ disabled : pagination.current == 1 }"><a href="" ng-click="setCurrent(pagination.current - 1)">&lsaquo;</a></li><li ng-repeat="pageNumber in pages track by $index" ng-class="{ active : pagination.current == pageNumber, disabled : pageNumber == \'...\' }"><a href="" ng-click="setCurrent(pageNumber)">{{ pageNumber }}</a></li><li ng-if="directionLinks" ng-class="{ disabled : pagination.current == pagination.last }"><a href="" ng-click="setCurrent(pagination.current + 1)">&rsaquo;</a></li><li ng-if="boundaryLinks"  ng-class="{ disabled : pagination.current == pagination.last }"><a href="" ng-click="setCurrent(pagination.last)">&raquo;</a></li></ul>')}])})();